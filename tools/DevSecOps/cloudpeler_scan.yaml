name: Cloudpeler
description: Auditor for cloud permissions and roles.
arguments:
  - name: arguments
    description: Additional Cloudpeler arguments
    required: false
    type: string

docker:
  docker_mode: custom
  base_image: python:3.11-slim
  apt_packages:
    - git
  run_commands:
    - git clone --depth 1 https://github.com/0x80/cloudpeler.git /opt/cloudpeler
    - cd /opt/cloudpeler && pip install -r requirements.txt
    - ln -s /opt/cloudpeler/cloudpeler.py /usr/local/bin/cloudpeler

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 256Mi

schema:
  type: object
  properties:
    arguments:
      type: string
      default: ""
